<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - VisionAnything</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            background-image: url("/static/cat_fruits.png");
            background-size: cover;
            background-position: center;
            color: black; /* Added text color */
        }

        /* Container styles */
        .container-box {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
        }

        /* Button colors */
        .btn {
            border-radius: 10px;
            margin-right: 10px;
            border: 2px solid transparent;
        }

        .btn-mobilesam {
            color: #007bff;
            border-color: #007bff;
        }

        .btn-mobilesam:hover, .btn-mobilesam:focus {
            background-color: #007bff;
            color: white;
        }

        .btn-cnn {
            color: #28a745;
            border-color: #28a745;
        }

        .btn-cnn:hover, .btn-cnn:focus {
            background-color: #28a745;
            color: white;
        }

        .btn-grounded {
            color: #dc3545;
            border-color: #dc3545;
        }

        .btn-grounded:hover, .btn-grounded:focus {
            background-color: #dc3545;
            color: white;
        }
    </style>
</head>
<body>

{% include 'navbar/navbar.html' %}

<div class="container d-flex justify-content-center align-items-center" style="height: 100vh;">
    <div class="container-box col-lg-8 col-md-10 col-sm-12">
        <!-- Button for selecting MobileSAM -->
        <button type="button" class="btn btn-mobilesam">MobileSAM</button>
        <!-- Placeholder where MobileSAM content will be loaded -->
        <div id="mobilesam-content"></div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const mobilesamButton = document.querySelector('.btn-mobilesam');
    const contentContainer = document.getElementById('mobilesam-content');

    mobilesamButton.addEventListener('click', function() {
        // Hide the MobileSAM button immediately when clicked
        mobilesamButton.style.display = 'none';

        fetch('/mobilesam')
        .then(response => {
            if (response.ok) return response.text();
            throw new Error('Failed to load the MobileSAM page');
        })
        .then(html => {
            contentContainer.innerHTML = html;
            contentContainer.style.display = 'block';
            // Now invoke any scripts or reinitialize functionalities
            executeScriptsFromContent(contentContainer);
        })
        .catch(error => {
            console.error('Error loading MobileSAM:', error);
            // Show the button again if there is an error loading the content
            mobilesamButton.style.display = 'block';
        });
    });
});

function executeScriptsFromContent(container) {
    Array.from(container.querySelectorAll("script")).forEach(oldScript => {
        const newScript = document.createElement("script");
        Array.from(oldScript.attributes)
            .forEach(attr => newScript.setAttribute(attr.name, attr.value));
        newScript.appendChild(document.createTextNode(oldScript.innerHTML));
        oldScript.parentNode.replaceChild(newScript, oldScript);
    });
}

</script>

</body>
</html>
